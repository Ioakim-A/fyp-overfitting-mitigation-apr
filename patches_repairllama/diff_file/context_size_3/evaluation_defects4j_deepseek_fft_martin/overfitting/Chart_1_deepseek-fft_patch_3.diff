diff --git source/org/jfree/chart/renderer/category/AbstractCategoryItemRenderer.java source/org/jfree/chart/renderer/category/AbstractCategoryItemRenderer.java
index ce2248b..2e346d8 100644
--- source/org/jfree/chart/renderer/category/AbstractCategoryItemRenderer.java
+++ source/org/jfree/chart/renderer/category/AbstractCategoryItemRenderer.java
@@ -1794,7 +1794,10 @@ public abstract class AbstractCategoryItemRenderer extends AbstractRenderer
         }
         int index = this.plot.getIndexOf(this);
         CategoryDataset dataset = this.plot.getDataset(index);
-        if (dataset != null) {
+// buggy code
+//        if (dataset != null) {
+        if (!(dataset instanceof CategoryDataset)) {
+
             return result;
         }
         int seriesCount = dataset.getRowCount();
